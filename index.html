<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=mop&display=block"
    />
    <link rel="stylesheet" href="style.css" />
    <title id="loc_title">Projekt zaliczeniowy - Bruno Talaga</title>
  </head>
  <body>
    <button name="mode_toggle" id="mode_toggle" onclick="toggleDarkMode()">
      <span class="material-icons">dark_mode</span
      ><span class="material-icons display-none">light_mode</span>
    </button>
    <select name="language_select" id="language_select">
      <option value="PL">PL</option>
      <option value="EN">EN</option>
    </select>
    <h2 id="loc_head2">Symulator podstawowych instrukcji x86 - Bruno Talaga</h2>
    <div class="centered-flex">
      <button
        type="button"
        name="manual"
        id="manual_button"
        onclick="toggleManual()"
      >
        <span class="material-icons">menu_book</span> Instrukcja
      </button>
    </div>
    <div class="manual-background display-none"></div>
    <div class="manual-div display-none">
      <h2>Instrukcja</h2>
      <button
        type="button"
        name="close_manual"
        class="close-man-button"
        id="close_manual"
        onclick="toggleManual()"
      >
        <span class="material-icons">cancel</span>
      </button>
      <div class="scroll-box-man">
        <h4>
          Witaj w symulatorze podstawowych instrukcji x86! Poniżej znajdziesz
          opis funkcji programu:
        </h4>
        <a href="https://github.com/w4ty/CPUsimProject" target="_blank"
          >Link do repozytorium</a
        ><br />
        <a href="./docs/Sprawozdanie.pdf" target="_blank"
          >Link do sprawozdania projektowego</a
        >
        <ul>
          <li>
            <strong>MOV - przenosi wartość z jednej zmiennej do drugiej</strong
            ><br />
            Przyjmuje dwa argumenty: MOV ARG1, ARG2<br />
            ARG1 - zmienna, do której przenosimy wartość<br />
            Dozwolone typy: REJESTR, WARTOŚĆ (HEXADECYMALNA), ADRES PAMIĘCI<br />
            ARG2 - zmienna, z której przenosimy wartość<br />
            Dozwolone typy: REJESTR, WARTOŚĆ (HEXADECYMALNA), ADRES PAMIĘCI
          </li>
          <li>
            <strong>XCHG - zamienia wartości dwóch zmiennych</strong><br />
            Przyjmuje dwa argumenty: XCHG ARG1, ARG2<br />
            ARG1 - zmienna, do której przenosimy wartość<br />
            Dozwolone typy: REJESTR, ADRES PAMIĘCI<br />
            ARG2 - zmienna, z której przenosimy wartość<br />
            Dozwolone typy: REJESTR, ADRES PAMIĘCI
          </li>
          <li>
            <strong>PUSH - wrzuca wartość zmiennej na stos</strong><br />
            Przyjmuje jeden argument: PUSH ARG1<br />
            ARG1 - zmienna, którą wrzucamy na stos<br />
            Dozwolone typy: REJESTR
          </li>
          <li>
            <strong
              >POP - zdejmuje wartość ze stosu i przypisuje ją do
              zmiennej</strong
            ><br />
            Przyjmuje jeden argument: POP ARG1<br />
            ARG1 - zmienna, do której przypisujemy wartość ze stosu<br />
            Dozwolone typy: REJESTR
          </li>
        </ul>

        <h4>Oznaczenia typów w polu argumentów:</h4>
        <ul>
          <li>
            <strong>REJESTR</strong> - AX, BX, CX, DX, BP, DI, SI, DISP<br />
            Wielkość liter ma znaczenie
          </li>
          <li>
            <strong>WARTOŚĆ (HEXADECYMALNA)</strong> - 0000 - FFFF<br />
            Wartość musi być zapisana w formacie heksadecymalnym oraz zawsze
            musi składać się z 4 znaków, przykładowo: 0000, 0001, 00FF<br />
            Wielkość liter nie ma znaczenia
          </li>
          <li>
            <strong>ADRES PAMIĘCI</strong> - [DI], [SI], [BX], [BP], [SI+BX],
            [SI+BP], [DI+BX], [DI+BP]<br />
            Program pozwala na własne wyliczenie adresu pamięci używając liczb
            heksadecymalnych i operatora "+"<br />
            np. [0002 + 0002 + 0002] - adres pamięci 0006<br />
            W obliczeniach można mieszać rejestry i wartości heksadecymalne<br />
            np. [SI + 0002 + BP] - adres pamięci będzie wyliczony z wartości
            zawartej w rejestrze SI, wartości 0002 oraz wartości zawartej w
            rejestrze BP
          </li>
        </ul>
      </div>
    </div>
    <div class="grid-container">
      <div id="variable_table" class="grid-item">
        <p>Tabela wartości</p>
        <table class="default_table">
          <tr>
            <th>AX</th>
            <th>BX</th>
            <th>CX</th>
            <th>DX</th>
          </tr>
          <tr>
            <td id="ax_val">
              <input
                type="text"
                name="table_input_0"
                id="table_input_0"
                class="table-input"
                maxlength="4"
              />
            </td>
            <td id="bx_val">
              <input
                type="text"
                name="table_input_1"
                id="table_input_1"
                class="table-input"
                maxlength="4"
              />
            </td>
            <td id="cx_val">
              <input
                type="text"
                name="table_input_2"
                id="table_input_2"
                class="table-input"
                maxlength="4"
              />
            </td>
            <td id="dx_val">
              <input
                type="text"
                name="table_input_3"
                id="table_input_3"
                class="table-input"
                maxlength="4"
              />
            </td>
          </tr>
        </table>
        <button
          type="button"
          name="empty_table"
          id="empty_first"
          value="Wyzeruj"
          onclick="setTable(0)"
        >
          <span class="material-icons">delete</span>
        </button>
        <button
          type="button"
          name="randomize_table"
          id="randomize_first"
          value="Wypełnij losowo"
          onclick="setTable(0, 1)"
        >
          <span class="material-icons">casino</span>
        </button>
        <button
          type="button"
          name="fill_table"
          id="fill_first"
          value="Wypełnij"
          onclick="setTable(0, 2)"
        >
          <span class="material-icons">edit</span>
        </button>
        <table class="default_table">
          <tr>
            <th>BP</th>
            <th>DI</th>
            <th>SI</th>
            <th>DISP</th>
          </tr>
          <tr>
            <td id="bp_val">
              <input
                type="text"
                name="table_input_4"
                id="table_input_4"
                class="table-input"
                maxlength="4"
              />
            </td>
            <td id="di_val">
              <input
                type="text"
                name="table_input_5"
                id="table_input_5"
                class="table-input"
                maxlength="4"
              />
            </td>
            <td id="si_val">
              <input
                type="text"
                name="table_input_6"
                id="table_input_6"
                class="table-input"
                maxlength="4"
              />
            </td>
            <td id="offset_val">
              <input
                type="text"
                name="table_input_7"
                id="table_input_7"
                class="table-input"
                maxlength="4"
              />
            </td>
          </tr>
        </table>
        <button
          type="button"
          name="empty_table"
          id="empty_second"
          value="Wyzeruj"
          onclick="setTable(1)"
        >
          <span class="material-icons">delete</span>
        </button>
        <button
          type="button"
          name="fill_table"
          id="fill_second"
          value="Wypełnij"
          onclick="setTable(1, 2)"
        >
          <span class="material-icons">edit</span>
        </button>
        <p>Stos (wskaźnik: <span id="stack_pointer"></span>):</p>
        <div class="scroll-box"><span id="stack_return"></span></div>
        <button
          type="button"
          name="clear_stack"
          id="clear_stack"
          value="Wyczyść"
          onclick="clearObject(stack, `STACK`); resetStackPointer()"
        >
          <span class="material-icons">delete</span>
        </button>
      </div>
      <div id="operations" class="grid-item">
        <p>Pole komend</p>
        <div class="centered-flex">
          <select name="variable_help" id="variable_help">
            <option value="AX">AX</option>
            <option value="BX">BX</option>
            <option value="CX">CX</option>
            <option value="DX">DX</option>
            <option value="BP">BP</option>
            <option value="DI">DI</option>
            <option value="SI">SI</option>
            <option value="DISP">DISP</option>
          </select>
        </div>
        <div class="centered-flex">
          <button
            type="button"
            name="insert_arg"
            id="insert_first_arg"
            value="Wpisz jako pierwszy"
            onclick="insertVariableToInput(`arg_first`, `variable_help`)"
          >
            1<span class="material-icons">south_west</span>
          </button>
          <button
            type="button"
            name="insert_arg"
            id="insert_second_arg"
            value="Wpisz jako drugi"
            onclick="insertVariableToInput(`arg_second`, `variable_help`)"
          >
            <span class="material-icons">south_east</span>2</button
          ><br />
        </div>
        <div>
          <select name="commands" id="commands">
            <option value="MOV" onclick="toggleSecondArg(true)">MOV</option>
            <option value="XCHG" onclick="toggleSecondArg(true)">XCHG</option>
            <option value="PUSH" onclick="toggleSecondArg(false)">PUSH</option>
            <option value="POP" onclick="toggleSecondArg(false)">POP</option>
          </select>
          <input type="text" name="arg_first" id="arg_first" />,
          <input type="text" name="arg_second" id="arg_second" />
        </div>
        <div class="centered-flex">
          <button
            type="button"
            name="swap_order"
            id="swap_order"
            value="Zamień kolejność"
            onclick="swapInputOrder()"
          >
            <span class="material-icons">swap_horizontal_circle</span>
          </button>
          <button
            type="button"
            name="run_command"
            id="run_command"
            value="Wykonaj"
            onclick="runCommand(document.getElementById(`commands`).value, document.getElementById(`arg_first`).value, document.getElementById(`arg_second`).value)"
          >
            <span class="material-icons">play_circle</span>
          </button>
        </div>
        <p>Tryb adresowania pamięci:</p>
        <input
          type="radio"
          name="memory_address_mode"
          id="mem_add_indeksowy"
          value="Indeksowy"
          onclick="updateMemoryRegSelection(this.value)"
        />
        <label for="mem_add_indeksowy">Indeksowy</label>
        <input
          type="radio"
          name="memory_address_mode"
          id="mem_add_bazowy"
          value="Bazowy"
          onclick="updateMemoryRegSelection(this.value)"
        />
        <label for="mem_add_bazowy">Bazowy</label>
        <input
          type="radio"
          name="memory_address_mode"
          id="mem_add_indeksowo-bazowy"
          value="Indeksowo-bazowy"
          onclick="updateMemoryRegSelection(this.value)"
        />
        <label for="mem_add_indeksowo-bazowy">Indeksowo-bazowy</label
        ><br /><br />
        <div class="centered-flex">
          <select name="memory_reg_selection" id="memory_reg_selection">
            <option value="Wybierz tryb adresacji">
              Wybierz tryb adresacji
            </option>
          </select>
        </div>
        <div class="centered-flex">
          <button
            type="button"
            name="insert_mem_add"
            id="insert_mem_add_first"
            value="Wpisz adres jako pierwszy argument"
            onclick="insertVariableToInput(`arg_first`, `memory_reg_selection`, true)"
          >
            1 <span class="material-icons">memory</span>
          </button>
          <button
            type="button"
            name="insert_mem_add"
            id="insert_mem_add_second"
            value="Wpisz adres jako drugi argument"
            onclick="insertVariableToInput(`arg_second`, `memory_reg_selection`, true)"
          >
            <span class="material-icons">memory</span> 2
          </button>
        </div>
      </div>
      <div id="log" class="grid-item">
        <p id="status_message">Log operacji:</p>
        <div class="scroll-box autoscroll">
          <span id="operation_return"></span>
        </div>
        <button
          type="button"
          name="clear_operation_log"
          id="clear_operation_log"
          value="Wyczyść"
          onclick="clearOperationLog()"
        >
          <span class="material-symbols-outlined">mop</span>
        </button>
        <p id="memory_message">Pamięć:</p>
        <div class="scroll-box autoscroll">
          <span id="memory_return"></span>
        </div>
        <button
          type="button"
          name="clear_memory"
          id="clear_memory"
          value="Wyczyść"
          onclick="clearObject(memory, `MEMORY`)"
        >
          <span class="material-icons">delete</span>
        </button>
      </div>
    </div>
    <script src="script.js"></script>
  </body>
</html>
